<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="./CSS/profile.css" />
<title>Profile</title>
</head>

<body onload="displayJSON();">
	<div class="page">
		<h1>Profile</h1>
		<div>
			<div id="profile-username"></div>
			<div id="profile-image"></div>
			<div id="profile-interests"></div>
		</div>
		<form onsubmit="updateProfile()" name="editform" method="POST">
			<label for="username" name="username">Username:</label>
			<input name="username" id="new-username" placeholder="Modify username" />
			
			<br>
			<label for="image">image:</label>
			<input type="text" id="image" name="image" placeholder="Modify profile picture">
			
			<br>
	    	<label for="interest">Interest:</label>
	   		<br>
	   		
	   		<input id="interest1" type="checkbox" name="interest" value="marshall">
			<label for="interest1"> Marshall</label><br>
			<input id="interest2" type="checkbox" name="interest" value="viterbi">
			<label for="interest2"> Viterbi</label><br>
			<input  id="interest3" type="checkbox" name="interest" value ="dornsife">
			<label for="interest3">Dornsife</label>
			<input  id="interest4" type="checkbox" name="interest" value ="computerScience">
			<label for="interest4">Computer Science</label>
			<input  id="interest5" type="checkbox" name="interest" value ="csba">
			<label for="interest5">CSBA</label>
			<input  id="interest6" type="checkbox" name="interest" value ="businessAdmin">
			<label for="interest6">Business Administration</label>
			<input  id="interest7" type="checkbox" name="interest" value ="csgames">
			<label for="interest7">CS Games</label>
			<input  id="interest8" type="checkbox" name="interest" value ="cais">
			<label for="interest8">CAIS</label>
			<input  id="interest9" type="checkbox" name="interest" value ="athenaHacks">
			<label for="interest9">Athena Hacks</label>
			<input  id="interest10" type="checkbox" name="interest" value ="scope">
			<label for="interest10">Scope</label>
			<input type="submit">
		</form>

		<div class="footer">
            <a href="HomePage.html"><img class="footer-icon" src="./assets/home-icon.png" alt="home"/></a>
            <a href="Search.html"><img class="footer-icon" src="./assets/search-icon.png" alt="search"/></a>
            <a href=""><img class="footer-icon" src="./assets/chat-icon.png" alt="chat"/></a>
            <a href="Profile.html"><img class="footer-icon" src="./assets/user.png" alt="profile"/></a>
        </div>
	</div>
	
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script type="text/javascript">
		function displayJSON() {
			$.ajax({
				type : "GET",
				url : "EditProfileServlet",
				success : function(result) {
					var name = "<p>Current Username: "+ result.username + "</p>";
					var image = "<p>Current profile image: <img style='width:10vw;' src='"+ result.profilePicture + "' alt='profile-pic' /></p>";
					var interests = "<p>Interests: "+ result.interest + "</p>";
					
					$('#profile-username').html(name);
					$('#profile-image').html(image);
					$('#profile-interests').html(interests);

					
				},
				error: function(errorMessage) {
					$('#showing').html('ERROR');
				}
			});
	
			return false;
		};
		
	function updateProfile(){
			var selectedInterest = new Array();
			$('input[name="interest"]:checked').each(function() {
				selectedInterest.push(this.value);
			});
			alert(selectedInterest);
			$.ajax({
				type : "POST",
				url : "EditProfileServlet",
				dataType:"json",
				data: {
					username: editform.username.value,
					image: editform.image.value,
					interest: selectedInterest
				},
				success : function(result) {
					

					
				},
				error: function(errorMessage) {
					$('#showing').html('ERROR');
				}
			});
	
			return false;
		};
	
	</script>
	
</body>
